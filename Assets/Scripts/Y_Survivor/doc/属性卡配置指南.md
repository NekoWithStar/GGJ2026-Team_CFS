# 属性卡配置指南

**版本**: v2.2 | **更新**: 2026-01-31

---

## 📋 配置流程

1. 创建 PropertyCard 数据
2. 配置属性修改效果
3. 测试验证

---

## 🔧 PropertyCard 数据配置

### 创建方式

右键菜单：`Create > Cards > Property Card`

### 基础属性

| 字段 | 说明 | 示例值 |
|------|------|--------|
| **cardName** | 卡片名称 | "伤害强化" |
| **cardIcon** | 卡片图标 | Sprite 资源 |
| **description** | 卡片描述 | "永久增加5点伤害" |
| **rarity** | 稀有度 | Common/Rare/Epic/Legendary |

### 属性修改配置

| 字段 | 说明 | 选项 |
|------|------|------|
| **targetType** | 目标类型 | Weapon（武器）/ Player（玩家）/ Enemy（敌人）|
| **propertyType** | 属性类型 | 见下表 |
| **modType** | 修改类型 | Add（加法）/ Mul（乘法）/ AfterAdd（后置加法）|
| **modValue** | 修改数值 | 具体数值 |

---

## 📊 属性类型说明

### 武器属性（targetType = Weapon）

| propertyType | 说明 | 推荐值 |
|--------------|------|--------|
| **Damage** | 伤害 | Add: 5-20, Mul: 0.2-0.5 |
| **AttackRate** | 攻速 | Add: 0.5-2, Mul: 0.1-0.3 |
| **CritChance** | 暴击率 | Add: 0.05-0.2 (5%-20%) |
| **CritDamageMultiplier** | 暴击倍率 | Add: 0.5-1.5, Mul: 0.2-0.5 |
| **BulletSpeed** | 子弹速度（远程）| Add: 2-10, Mul: 0.2-0.5 |
| **MaxDistance** | 射程（远程）| Add: 5-15, Mul: 0.2-0.5 |
| **MeleeRange** | 范围（近战）| Add: 0.5-2, Mul: 0.2-0.5 |
| **ProjectileCount** | 发射数量（远程）| Add: 1-3 |

### 玩家属性（targetType = Player）

| propertyType | 说明 | 推荐值 |
|--------------|------|--------|
| **MoveSpeed** | 移动速度 | Add: 1-3, Mul: 0.1-0.3 |
| **MaxHealth** | 最大生命 | Add: 20-50, Mul: 0.2-0.5 |
| **Defense** | 防御力 | Add: 5-15, Mul: 0.1-0.3 |
| **HealthRegen** | 生命回复 | Add: 1-5 |

### 敌人属性（targetType = Enemy）

| propertyType | 说明 | 推荐值 |
|--------------|------|--------|
| **MoveSpeed** | 移动速度 | Mul: -0.2 到 -0.5（减速）|
| **MaxHealth** | 最大生命 | Mul: -0.1 到 -0.3（减少）|
| **AttackDamage** | 攻击力 | Mul: -0.2 到 -0.4（削弱）|

---

## 🎯 修改类型详解

### Add（加法）

直接增加数值。

**使用场景**：固定增益
- 伤害 +5
- 攻速 +1
- 暴击率 +10%

**配置示例**：
```
modType: Add
modValue: 5         // +5 伤害
modValue: 0.1       // +10% 暴击率（0.1 = 10%）
```

### Mul（乘法）

按百分比增加。

**使用场景**：比例增益
- 伤害 +50%
- 攻速 +30%

**配置示例**：
```
modType: Mul
modValue: 0.5       // +50% 伤害
modValue: 0.3       // +30% 攻速
```

**计算公式**：`最终值 = (基础值 + 所有Add) × (1 + 所有Mul)`

### AfterAdd（后置加法）

在乘法之后增加。

**使用场景**：最终增益
- 最终伤害 +10

**配置示例**：
```
modType: AfterAdd
modValue: 10        // 最终 +10 伤害
```

**完整计算**：`最终值 = (基础值 + Add) × (1 + Mul) + AfterAdd`

---

## 📝 配置示例

### 示例 1：伤害强化（加法）

```
PropertyCard 配置：
━━━━━━━━━━━━━━━━━━
基础信息
  cardName: "伤害强化"
  cardIcon: damage_icon
  description: "永久增加5点伤害"
  rarity: Common

属性修改
  targetType: Weapon
  propertyType: Damage
  modType: Add
  modValue: 5

效果：武器伤害 +5
```

### 示例 2：攻速提升（乘法）

```
PropertyCard 配置：
━━━━━━━━━━━━━━━━━━
基础信息
  cardName: "攻速提升"
  cardIcon: speed_icon
  description: "攻击速度提升30%"
  rarity: Rare

属性修改
  targetType: Weapon
  propertyType: AttackRate
  modType: Mul
  modValue: 0.3       ← 30% = 0.3

效果：武器攻速 +30%
```

### 示例 3：暴击专精

```
PropertyCard 配置：
━━━━━━━━━━━━━━━━━━
基础信息
  cardName: "暴击专精"
  cardIcon: crit_icon
  description: "暴击率+10%，暴击倍率+0.5"
  rarity: Epic

属性修改（需要2张卡）
卡片A:
  targetType: Weapon
  propertyType: CritChance
  modType: Add
  modValue: 0.1       ← 10% = 0.1

卡片B:
  targetType: Weapon
  propertyType: CritDamageMultiplier
  modType: Add
  modValue: 0.5

效果：暴击率 +10%，暴击倍率 +0.5
```

### 示例 4：移动加速

```
PropertyCard 配置：
━━━━━━━━━━━━━━━━━━
基础信息
  cardName: "移动加速"
  cardIcon: boot_icon
  description: "移动速度提升20%"
  rarity: Common

属性修改
  targetType: Player
  propertyType: MoveSpeed
  modType: Mul
  modValue: 0.2       ← 20% = 0.2

效果：玩家移动速度 +20%
```

### 示例 5：敌人减速光环

```
PropertyCard 配置：
━━━━━━━━━━━━━━━━━━
基础信息
  cardName: "寒冰光环"
  cardIcon: ice_icon
  description: "全局敌人速度降低30%"
  rarity: Legendary

属性修改
  targetType: Enemy
  propertyType: MoveSpeed
  modType: Mul
  modValue: -0.3      ← -30% = -0.3（负数表示减少）

效果：所有敌人移动速度 -30%
```

---

## 🔄 属性叠加计算示例

### 场景：多张伤害卡叠加

```
武器基础伤害: 10

应用卡片A：+5 伤害（Add）
  → 当前：10 + 5 = 15

应用卡片B：+50% 伤害（Mul）
  → 当前：(10 + 5) × 1.5 = 22.5

应用卡片C：+10 最终伤害（AfterAdd）
  → 当前：(10 + 5) × 1.5 + 10 = 32.5

切换武器（基础伤害30）
  → 新伤害：(30 + 5) × 1.5 + 10 = 62.5 ✅ 所有卡片效果保留
```

---

## ✅ 配置检查清单

### 基础检查

- [ ] cardName 已填写
- [ ] rarity 已选择
- [ ] description 已填写

### 属性修改检查

- [ ] targetType 正确（Weapon/Player/Enemy）
- [ ] propertyType 正确
- [ ] modType 正确（Add/Mul/AfterAdd）
- [ ] modValue 合理

### 数值合理性

**百分比类型**（暴击率、暴击倍率）：
- Add: 使用小数（10% = 0.1）
- Mul: 使用小数（30% = 0.3）

**负数效果**（减益）：
- 只用于 Enemy 目标
- modValue 使用负数（-0.3 = -30%）

---

## 🔧 测试方法

### 使用 PropertyCardTester

1. 场景中添加空物体，命名 "CardTester"
2. 添加组件：`PropertyCardTester`
3. 配置：
   - Test Target: 选择测试目标（Weapon/Player/Enemy）
   - Cards To Apply: 拖入要测试的卡片列表
4. 运行游戏，查看 Console 输出

---

## 🎮 稀有度建议

| 稀有度 | 效果强度 | 示例 |
|--------|---------|------|
| **Common** | 小幅增益 | +5 伤害，+10% 攻速 |
| **Rare** | 中幅增益 | +10 伤害，+30% 攻速 |
| **Epic** | 大幅增益 | +20 伤害，+50% 攻速，双属性 |
| **Legendary** | 极强增益 | +30 伤害，+100% 攻速，全局效果 |

---

**文档维护**: GitHub Copilot  
**最后更新**: 2026-01-31
